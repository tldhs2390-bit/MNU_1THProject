<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org"
      th:replace="layout/layout :: layout(~{::section})"
      th:with="cssFile='board.css'">

<section class="board-list-section">

    <!-- 글쓰기 버튼 (관리자만 표시) -->
	<div class="board-header">
	    <h2>공지사항</h2>
	    <a th:if="${session.user != null and session.user.userid == 'admin'}"
	       th:href="@{/board/board_write(page=${page})}" 
	       class="board-write-btn">
	       글쓰기
	    </a>
	</div>

    <div class="board-list">
        <!-- 목록 헤더 -->
        <div class="board-row board-head">
            <div class="col-num">번호</div>
            <div class="col-title">제목</div>
            <div class="col-writer">작성자</div>
            <div class="col-date">날짜</div>
            <div class="col-read">조회수</div>
        </div>

        <!-- 데이터 있을 때 -->
        <div th:if="${list != null and !#lists.isEmpty(list)}">
	    <div class="board-row" th:each="dto, iterStat : ${list}">
	
	        <!-- 내림차순 + 페이지 연속 번호 -->
	        <div class="col-num"
	             th:text="${listcountStart - iterStat.index}">
	        </div>
	
	        <div class="col-title">
	            <a th:href="@{/board/board_view(idx=${dto.idx}, page=${page})}"
	               th:text="${dto.subject}">
	            </a>
	        </div>
	
	        <div class="col-writer" th:text="${dto.name}"></div>
	        <div class="col-date"
	             th:text="${#temporals.format(dto.regdate, 'yyyy-MM-dd')}">
	        </div>
	        <div class="col-read" th:text="${dto.readcnt}"></div>
	
	    </div>
		</div>

        <!-- 데이터 없을 때 -->
        <div class="board-row empty" th:if="${list == null or #lists.isEmpty(list)}">
            등록된 공지사항이 없습니다.
        </div>
    </div>
     <div class="board-pagination" style="text-align:center; margin-top:20px;">
    <span th:if="${pagelist != null}" th:utext="${pagelist}"></span>
</div>
    <!-- 검색 바 -->
	<div class="portfolio-search" style="text-align:center; margin-bottom:15px;">
	    <form th:action="@{/board/board_list}" method="get">
	        <input type="text" name="keyword" placeholder="제목 검색" th:value="${keyword}" />
	        <button type="submit">검색</button>
	    </form>
	</div>
</section>
</html>